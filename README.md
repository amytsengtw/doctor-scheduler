# 🏥 台灣醫護分級排班系統 (Role-Based Scheduling System)

這是一個基於 **Python** 與 **Google OR-Tools** 開發的智慧排班系統，專為解決不同職級（住院醫師 vs 實習醫師）的複雜工時限制而設計，並具備自動妥協邏輯。

## ✨ 核心功能 (Features)

### 1. 🤖 三段式救援排班 (Three-Stage Fallback)
系統會依照優先順序，嘗試算出最佳解。若遭遇衝突，會自動降級以確保產出班表：
1.  **Level 1 (完美模式)**：每人 <= 8 班 + 完全滿足指定值班。
2.  **Level 2 (放寬工時)**：若 L1 失敗，放寬住院醫師班數上限 (>8)，但仍堅持滿足指定值班。
3.  **Level 3 (放寬預排)**：若 L2 仍失敗 (例如指定值班衝突)，**系統將不再強制滿足指定值班**，改為「能排多少算多少」，並列出被犧牲的需求。

### 2. 🎓 實習醫師保護機制 (Intern Protection)
系統針對實習醫師 (Interns) 設定了嚴格的硬性限制 (Hard Constraints)：
*   **單週限 2 班**：依照日曆週 (Calendar Week, Mon-Sun) 計算，每週值班數不得超過 2 班。
*   **平日上限**：每月平日班 (Mon-Fri) 最多 6 班。
*   **假日上限**：每月假日班 (Sat-Sun) 最多 2 班。

### 3. 🎯 指定值班與預假
*   **指定值班**：在 Level 1 & 2 視為硬限制；在 Level 3 視為軟限制 (優先權重)。
*   **預假無上限**：醫師可自由勾選不想值班的日子。

### 4. 📊 視覺化與報表
*   **身份標示**：日曆上會以**紅色標籤**特別標示實習醫師。
*   **遺憾清單**：若進入 Level 3，系統會明確列出哪些預排需求被犧牲了。

## 🚀 如何使用

1.  輸入醫師名單。
2.  勾選 **實習醫師 (Intern)**。
3.  填寫預假或指定值班。
4.  點擊 **「開始排班」**，觀察系統是否跳出警告。

## ⚠️ 免責聲明

此系統僅供輔助排班使用。若出現「嚴重警告」，請總醫師務必確認被犧牲的指定值班需求，並進行人工溝通。
