# 🏥 婦產科雙軌排班系統 (v3.1 強韌版)

本系統專為解決「絕對不能開天窗」的排班需求設計。當人力與規則衝突時，系統不會失敗，而是提供兩種「犧牲方案」供總醫師決策。

## ✨ 核心特色

### 1. 🛡️ 絕對有解 (Always Feasible)
系統採用 **Soft Constraints with Penalty (帶懲罰的軟限制)** 機制。
這意味著系統**允許打破規則**來換取班表的產出，但會將打破規則的行為記錄在「犧牲報告」中。

### 2. ⚖️ 雙方案決策 (Decision Support)
當無法完美排班時，系統自動計算兩個方案：
*   **方案 A (規則優先)**：
    *   **優先保護**：R 的 No-Go、Intern/PGY 的工時上限。
    *   **代價**：主治醫師 (VS) 可能會被迫下來支援非指定班，或犧牲 VS 的休假。
*   **方案 B (主治優先)**：
    *   **優先保護**：VS 的生活品質 (不值非指定班、不碰 No-Go)。
    *   **代價**：R 可能會踩到 No-Go，Intern/PGY 可能會超過平日6/假日2的限制。

### 3. 📝 犧牲報告 (Sacrifice Log)
清楚條列為了產出這張班表，犧牲了什麼：
*   *"洋洋 (R3) 被排在 No-Go 日 (12/5)"*
*   *"菜鳥A (Int) 平日超過 6 班"*
*   *"柯P (VS) 下海支援非指定班 (12/8)"*

## 🔴 大班規則 (VS & R)
*   **VS 指定班**：最高優先級，必定滿足。
*   **VS No-Go**：可設定 VS 絕對不想值的日子。
*   **R No-Go**：在方案 A 中為硬限制，在方案 B 中可被犧牲。
*   **VS 支援**：當 R 無法填滿班表時，VS 會自動補位。

## 🔵 小班規則 (PGY & Intern)
*   **Intern 限制**：週2 / 月平日6 / 月假日2。
*   **PGY 限制**：同上。
*   **彈性處理**：若真的排不出來，系統會自動允許超額，並在報告中標示。

## 📂 JSON 存取
支援設定檔下載與上傳，方便複製貼上與重複使用。

## 🚀 使用說明
1.  輸入人員名單。
2.  設定 VS/R/PGY/Int 的 **指定值班 (Wishes)** 與 **不想值班 (No-Go)**。
3.  點擊 **「🚀 暴力運算」**。
4.  比較 **方案 A** 與 **方案 B** 的犧牲報告，選擇較能接受的版本下載 CSV。
