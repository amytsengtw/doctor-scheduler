# 🏥 台灣醫護分級排班系統 (Role-Based Scheduling System)

這是一個基於 **Python** 與 **Google OR-Tools** 開發的智慧排班系統，專為解決不同職級（住院醫師 vs 實習醫師）的複雜工時限制而設計。

## ✨ 核心功能 (Features)

### 1. 🎓 實習醫師保護機制 (Intern Protection)
系統針對實習醫師 (Interns) 設定了嚴格的硬性限制 (Hard Constraints)，確保符合訓練規範：
*   **7 天限 2 班**：任意連續 7 天內，值班數不得超過 2 班。
*   **平日上限**：每月平日班 (Mon-Fri) 最多 6 班。
*   **假日上限**：每月假日班 (Sat-Sun) 最多 2 班。

### 2. 👨‍⚕️ 住院醫師彈性排班 (Resident Flexibility)
針對住院醫師 (Residents) 採用「期望限制 (Soft Constraints)」策略：
*   **優先目標**：嘗試將每人每月班數控制在 **8 班** 以內。
*   **自動放寬 (Fallback Mode)**：
    *   若人力不足導致無法達成「8 班限制」，系統**不會報錯**。
    *   系統會自動放寬上限算出可行解，並顯示**警告訊息**，提醒總醫師目前已超時，需人工確認或說明。

### 3. 🎯 指定值班與預假
*   **指定值班**：醫師可指定「某天一定要值班」，系統視為最高指令。
*   **預假無上限**：醫師可自由勾選不想值班的日子。

### 4. 📊 視覺化與報表
*   **身份標示**：日曆上會以**紅色標籤**特別標示實習醫師，方便辨識人力配置。
*   **統計監控**：即時顯示每人的「平日班」與「假日班」數量，確認是否符合規定。

## 🚀 如何使用

1.  在左側欄位輸入所有醫師名單。
2.  在 **「身份設定」** 選單中，勾選哪些人是 **實習醫師 (Intern)**。
3.  (選填) 填寫預假或指定值班。
4.  點擊 **「開始排班」**。

## 🛠 技術架構

*   **演算法**：Google OR-Tools (Constraint Programming)
*   **介面**：Streamlit
*   **邏輯**：兩階段求解 (Two-Pass Solving) —— 先嘗試嚴格限制，失敗則嘗試寬鬆限制。

## ⚠️ 免責聲明

此系統僅供輔助排班使用。若系統顯示警告（超過 8 班），代表在當前人力與預假條件下，數學上無法滿足完美條件，請總醫師務必介入協調。
